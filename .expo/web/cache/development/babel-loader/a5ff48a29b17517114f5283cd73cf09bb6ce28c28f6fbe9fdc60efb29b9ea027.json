{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { ref, getDownloadURL, uploadBytesResumable } from \"firebase/storage\";\nimport { useState } from \"react\";\nimport { storage } from \"../Configuracoes/firebase\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ImagePicker(_ref) {\n  var onImgURLChange = _ref.onImgURLChange;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    progressPorcent = _useState2[0],\n    setPorgessPorcent = _useState2[1];\n  var handleFileChange = function handleFileChange(event) {\n    var _event$target, _event$target$files;\n    var file = (_event$target = event.target) == null ? void 0 : (_event$target$files = _event$target.files) == null ? void 0 : _event$target$files[0];\n    if (!file) return;\n    var storageRef = ref(storage, \"livros/\" + file.name);\n    var uploadTask = uploadBytesResumable(storageRef, file);\n    uploadTask.on(\"state_changed\", function (snapshot) {\n      var progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setPorgessPorcent(progress);\n    }, function (error) {\n      alert(error);\n    }, function () {\n      getDownloadURL(uploadTask.snapshot.ref).then(function (downloadURL) {\n        onImgURLChange(downloadURL);\n      });\n    });\n  };\n  var handleButtonPress = function handleButtonPress() {\n    var fileInput = document.createElement('input');\n    fileInput.type = 'file';\n    fileInput.onchange = handleFileChange;\n    fileInput.click();\n  };\n  return _jsxs(View, {\n    children: [_jsx(TouchableOpacity, {\n      onPress: handleButtonPress,\n      children: _jsx(Image, {\n        source: require(\"../Images/botaoModal.png\"),\n        style: {\n          width: \"80px\",\n          height: \"100px\",\n          marginTop: \"30px\"\n        }\n      })\n    }), !progressPorcent ? null : _jsxs(\"p\", {\n      children: [progressPorcent, \"%\"]\n    })]\n  });\n}","map":{"version":3,"names":["ref","getDownloadURL","uploadBytesResumable","useState","storage","Button","View","TouchableOpacity","Image","jsx","_jsx","jsxs","_jsxs","ImagePicker","_ref","onImgURLChange","_useState","_useState2","_slicedToArray","progressPorcent","setPorgessPorcent","handleFileChange","event","_event$target","_event$target$files","file","target","files","storageRef","name","uploadTask","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","alert","then","downloadURL","handleButtonPress","fileInput","document","createElement","type","onchange","click","children","onPress","source","require","style","width","height","marginTop"],"sources":["/home/senac/Docks-mobile-P.I/src/Screens/ImagePicker.jsx"],"sourcesContent":["import { ref, getDownloadURL, uploadBytesResumable } from \"firebase/storage\";\nimport { useState } from \"react\";\nimport { storage } from \"../Configuracoes/firebase\";\nimport { Button, View } from \"react-native\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { Image } from \"react-native\";\n\nexport default function ImagePicker({ onImgURLChange }) {\n  const [progressPorcent, setPorgessPorcent] = useState(0);\n\n  const handleFileChange = (event) => {\n    const file = event.target?.files?.[0];\n    if (!file) return;\n\n    const storageRef = ref(storage, `livros/${file.name}`);\n    const uploadTask = uploadBytesResumable(storageRef, file);\n\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setPorgessPorcent(progress);\n      },\n      (error) => {\n        alert(error);\n      },\n      () => {\n        getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n          onImgURLChange(downloadURL); // call the callback with the image URL\n        });\n      }\n    );\n  };\n\n  const handleButtonPress = () => {\n    const fileInput = document.createElement('input');\n    fileInput.type = 'file';\n    fileInput.onchange = handleFileChange;\n    fileInput.click();\n  };\n\n  return (\n    <View>\n         <TouchableOpacity onPress={handleButtonPress}>\n        <Image\n          source={require(\"../Images/botaoModal.png\")}\n          style={{ width: \"80px\", height: \"100px\", marginTop: \"30px\" }}\n        />\n      </TouchableOpacity>\n      {!progressPorcent ? null : <p>{progressPorcent}%</p>}\n    </View>\n  );\n}\n"],"mappings":";AAAA,SAASA,GAAG,EAAEC,cAAc,EAAEC,oBAAoB,QAAQ,kBAAkB;AAC5E,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,OAAO;AAAoC,OAAAC,MAAA;AAAA,OAAAC,IAAA;AAEpD,SAASC,gBAAgB,QAAQ,8BAA8B;AAAC,OAAAC,KAAA;AAAA,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAGhE,eAAe,SAASC,WAAWA,CAAAC,IAAA,EAAqB;EAAA,IAAlBC,cAAc,GAAAD,IAAA,CAAdC,cAAc;EAClD,IAAAC,SAAA,GAA6Cb,QAAQ,CAAC,CAAC,CAAC;IAAAc,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjDG,eAAe,GAAAF,UAAA;IAAEG,iBAAiB,GAAAH,UAAA;EAEzC,IAAMI,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,KAAK,EAAK;IAAA,IAAAC,aAAA,EAAAC,mBAAA;IAClC,IAAMC,IAAI,IAAAF,aAAA,GAAGD,KAAK,CAACI,MAAM,sBAAAF,mBAAA,GAAZD,aAAA,CAAcI,KAAK,qBAAnBH,mBAAA,CAAsB,CAAC,CAAC;IACrC,IAAI,CAACC,IAAI,EAAE;IAEX,IAAMG,UAAU,GAAG5B,GAAG,CAACI,OAAO,cAAYqB,IAAI,CAACI,IAAI,CAAG;IACtD,IAAMC,UAAU,GAAG5B,oBAAoB,CAAC0B,UAAU,EAAEH,IAAI,CAAC;IAEzDK,UAAU,CAACC,EAAE,CACX,eAAe,EACf,UAACC,QAAQ,EAAK;MACZ,IAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CACxBH,QAAQ,CAACI,gBAAgB,GAAGJ,QAAQ,CAACK,UAAU,GAAI,GAAG,CACxD;MACDjB,iBAAiB,CAACa,QAAQ,CAAC;IAC7B,CAAC,EACD,UAACK,KAAK,EAAK;MACTC,KAAK,CAACD,KAAK,CAAC;IACd,CAAC,EACD,YAAM;MACJrC,cAAc,CAAC6B,UAAU,CAACE,QAAQ,CAAChC,GAAG,CAAC,CAACwC,IAAI,CAAC,UAACC,WAAW,EAAK;QAC5D1B,cAAc,CAAC0B,WAAW,CAAC;MAC7B,CAAC,CAAC;IACJ,CAAC,CACF;EACH,CAAC;EAED,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAS;IAC9B,IAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IACjDF,SAAS,CAACG,IAAI,GAAG,MAAM;IACvBH,SAAS,CAACI,QAAQ,GAAG1B,gBAAgB;IACrCsB,SAAS,CAACK,KAAK,EAAE;EACnB,CAAC;EAED,OACEpC,KAAA,CAACN,IAAI;IAAA2C,QAAA,GACAvC,IAAA,CAACH,gBAAgB;MAAC2C,OAAO,EAAER,iBAAkB;MAAAO,QAAA,EAC9CvC,IAAA,CAACF,KAAK;QACJ2C,MAAM,EAAEC,OAAO,4BAA6B;QAC5CC,KAAK,EAAE;UAAEC,KAAK,EAAE,MAAM;UAAEC,MAAM,EAAE,OAAO;UAAEC,SAAS,EAAE;QAAO;MAAE;IAC7D,EACe,EAClB,CAACrC,eAAe,GAAG,IAAI,GAAGP,KAAA;MAAAqC,QAAA,GAAI9B,eAAe,EAAC,GAAC;IAAA,EAAI;EAAA,EAC/C;AAEX"},"metadata":{},"sourceType":"module","externalDependencies":[]}